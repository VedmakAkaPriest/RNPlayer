{
  "transitions": [
    {
      "name": "root",
      "to": "Source",
      "actions": {
        "static": [{
          "title": "ex.ua"
        }]
      }
    },
    {
      "name": "categories",
      "from": "Source",
      "to": "Category",
      "actions": {
        "fetch": "http://www.ex.ua/ru/video",
        "text": "results",
        "queryHtml": [
          "//table[@class='include_0']//a[not(@class='info')]",
          "//table[@class='include_0']//a[not(@class='info')]/@href"
        ],
        "map": ["title", "link"]
      }
    },
    {
      "name": "subcategories",
      "from": "Category",
      "to": "SubCategory",
      "actions": {
        "fetch": "http://www.ex.ua${link}",
        "text": "results",
        "queryHtml": [
          "//table[@class='include_0']//td/p[1]/a[1]",
            "//table[@class='include_0']//td/a/@href",
            "//table[@class='include_0']//td/a/img/@src"
        ],
        "map": ["title", "link", "poster"]
      }
    },
    {
      "name": "details",
      "from": "SubCategory",
      "to": "ItemDetails",
      "actions": {
        "fetch": "/ru/video",
        "text": "results",
        "queryHtml": [
          "//table[@class='include_0']//a[not(@class='info')]",
          "//table[@class='include_0']//a[not(@class='info')]/@href"
        ],
        "map": ["title", "link"]
      }
    },
    {
      "name": "play",
      "from": "ItemDetails",
      "to": "Player",
      "actions": {
        "fetch": "/ru/video",
        "text": "results",
        "queryHtml": [
          "//table[@class='include_0']//a[not(@class='info')]",
          "//table[@class='include_0']//a[not(@class='info')]/@href"
        ],
        "map": ["title", "link"]
      }
    }
  ],
  "states": [
    {
      "name": "Source",
      "screen": "SimpleListView",
      "model": "sources"
    },
    {
      "name": "Category",
      "screen": "SimpleListView",
      "model": "categories"
    },
    {
      "name": "SubCategory",
      "screen": "ThumbnailsListView",
      "model": "subCategories"
    },
    {
      "name": "ItemDetails",
      "screen": "ThumbnailsListView",
      "model": "itemDetails"
    },
    {
      "name": "Player",
      "screen": "PlayerView",
      "model": "itemDetails"
    }
  ],
  "init": "root"
}
